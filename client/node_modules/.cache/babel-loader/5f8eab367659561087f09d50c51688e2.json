{"ast":null,"code":"var _jsxFileName = \"/Users/brieucjamain/Desktop/template/src/components/Auth.js\";\nimport React, { Component } from 'react';\nimport { AUTH_TOKEN } from '../utils/constants';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nconst SIGNUP_MUTATION = gql`\n  mutation SignupMutation($email: String!, $password: String!, $name: String!) {\n    signup(email: $email, password: $password, name: $name) {\n      token\n    }\n  }\n`;\nconst LOGIN_MUTATION = gql`\n  mutation LoginMutation($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n    }\n  }\n`;\n\nclass Auth extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      login: true,\n      // switch between Login and SignUp\n      email: '',\n      password: '',\n      name: ''\n    };\n\n    this._confirm = async data => {\n      const {\n        token\n      } = this.state.login ? data.login : data.signup;\n\n      this._saveUserData(token);\n\n      this.props.history.push(`/`);\n    };\n\n    this._confirm = async () => {// ... you'll implement this ðŸ”œ\n    };\n\n    this._saveUserData = token => {\n      localStorage.setItem(AUTH_TOKEN, token);\n    };\n  }\n\n  componentDidMount() {\n    console.log('AUTH MOUNTED');\n  }\n\n  render() {\n    const {\n      login,\n      email,\n      password,\n      name\n    } = this.state;\n    console.log('AUTH');\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"mv3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, login ? 'Login' : 'Sign Up'), React.createElement(\"div\", {\n      className: \"flex flex-column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, !login && React.createElement(\"input\", {\n      value: name,\n      onChange: e => this.setState({\n        name: e.target.value\n      }),\n      type: \"text\",\n      placeholder: \"Your name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      value: email,\n      onChange: e => this.setState({\n        email: e.target.value\n      }),\n      type: \"text\",\n      placeholder: \"Your email address\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      value: password,\n      onChange: e => this.setState({\n        password: e.target.value\n      }),\n      type: \"password\",\n      placeholder: \"Choose a safe password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"flex mt3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Mutation, {\n      mutation: login ? LOGIN_MUTATION : SIGNUP_MUTATION,\n      variables: {\n        email,\n        password,\n        name\n      },\n      onCompleted: data => this._confirm(data),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, mutation => React.createElement(\"div\", {\n      className: \"pointer mr2 button\",\n      onClick: mutation,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, login ? 'login' : 'create account')), React.createElement(\"div\", {\n      className: \"pointer button\",\n      onClick: () => this.setState({\n        login: !login\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, login ? 'need to create an account?' : 'already have an account?')));\n  }\n\n}\n\nexport default Auth;","map":{"version":3,"sources":["/Users/brieucjamain/Desktop/template/src/components/Auth.js"],"names":["React","Component","AUTH_TOKEN","Mutation","gql","SIGNUP_MUTATION","LOGIN_MUTATION","Auth","state","login","email","password","name","_confirm","data","token","signup","_saveUserData","props","history","push","localStorage","setItem","componentDidMount","console","log","render","e","setState","target","value","mutation"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { AUTH_TOKEN } from '../utils/constants'\nimport { Mutation } from 'react-apollo'\nimport gql from 'graphql-tag'\n\nconst SIGNUP_MUTATION = gql`\n  mutation SignupMutation($email: String!, $password: String!, $name: String!) {\n    signup(email: $email, password: $password, name: $name) {\n      token\n    }\n  }\n`\n\nconst LOGIN_MUTATION = gql`\n  mutation LoginMutation($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n    }\n  }\n`\n\n\n\nclass Auth extends Component {\n  state = {\n    login: true, // switch between Login and SignUp\n    email: '',\n    password: '',\n    name: '',\n  }\n\n  componentDidMount(){\n    console.log('AUTH MOUNTED')\n  }\n\n  _confirm = async data => {\n    const { token } = this.state.login ? data.login : data.signup\n    this._saveUserData(token)\n    this.props.history.push(`/`)\n  }\n\n  render() {\n    const { login, email, password, name } = this.state\n    console.log('AUTH')\n    return (\n      <div>\n        <h4 className=\"mv3\">{login ? 'Login' : 'Sign Up'}</h4>\n        <div className=\"flex flex-column\">\n          {!login && (\n            <input\n              value={name}\n              onChange={e => this.setState({ name: e.target.value })}\n              type=\"text\"\n              placeholder=\"Your name\"\n            />\n          )}\n          <input\n            value={email}\n            onChange={e => this.setState({ email: e.target.value })}\n            type=\"text\"\n            placeholder=\"Your email address\"\n          />\n          <input\n            value={password}\n            onChange={e => this.setState({ password: e.target.value })}\n            type=\"password\"\n            placeholder=\"Choose a safe password\"\n          />\n        </div>\n        <div className=\"flex mt3\">\n            <Mutation\n            mutation={login ? LOGIN_MUTATION : SIGNUP_MUTATION}\n            variables={{ email, password, name }}\n            onCompleted={data => this._confirm(data)}\n            >\n            {mutation => (\n            <div className=\"pointer mr2 button\" onClick={mutation}>\n                {login ? 'login' : 'create account'}\n            </div>\n            )}\n            </Mutation>\n        <div\n            className=\"pointer button\"\n            onClick={() => this.setState({ login: !login })}\n        >\n    {login ? 'need to create an account?' : 'already have an account?'}\n</div>\n        </div>\n      </div>\n    )\n  }\n\n  _confirm = async () => {\n    // ... you'll implement this ðŸ”œ\n  }\n\n  _saveUserData = token => {\n    localStorage.setItem(AUTH_TOKEN, token)\n  }\n}\n\nexport default Auth"]},"metadata":{},"sourceType":"module"}